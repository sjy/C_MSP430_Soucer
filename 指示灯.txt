/********************************************************************
//DM430-L型最小系统板控制2个发光二极管闪烁测试程序
//发光二极管分别接入P34和P35，同时可以用于指示串口数据
//调试环境：EW430 V5.30
//作者：阿迪 www.avrgcc.com
//时间：2011.09.19
********************************************************************/

#include <msp430x14x.h>

#define CPU_F ((double)8000000) 
#define delay_us(x) __delay_cycles((long)(CPU_F*(double)x/1000000.0)) 
#define delay_ms(x) __delay_cycles((long)(CPU_F*(double)x/1000.0)) 

#define uchar unsigned char
#define uint  unsigned int

#define LED8 P3OUT                      //P34、P35口接2个LED灯用于测试

//***********************************************************************
//                   系统时钟初始化
//***********************************************************************
void Clock_Init()
{
  uchar i;
  BCSCTL1&=~XT2OFF;
  BCSCTL2|=SELM1+SELS;
  do{
    IFG1&=~OFIFG;
    for(i=0;i<100;i++)
       _NOP();
  }
  while((IFG1&OFIFG)!=0);
  IFG1&=~OFIFG; 
}
//***********************************************************************
//               MSP430内部看门狗初始化
//***********************************************************************
void WDT_Init()
{
   WDTCTL = WDTPW + WDTHOLD;       //关闭看门狗
}

//***********************************************************************
//               MSP430IO口初始化
//***********************************************************************
void Port_Init()
{
  P3SEL=0x00;                    //设置IO口为普通I/O模式
  P3DIR = 0xff;                  //设置IO口方向为输出
  P3OUT = 0x00;                  //初始设置为00
}



//***********************************************************************
//      主程序
//***********************************************************************
void main(void)
{ 
  WDT_Init();
  Clock_Init();                       //时钟初始化
  Port_Init();                        //端口初始化，用于控制IO口输入或输出
  while(1)
  {
    LED8=0x00;                        //点亮LED
    delay_ms(500);
    LED8=0xff;                        //熄灭LED
    delay_ms(500);
  }
}



